// menu-musachi.js - ูุงุฆูุฉ MUSACHI-BOT ุงููุงููุฉ

let handler = async (msgData) => {
  const { conn, m, command, sender } = msgData;
  let user = global.db.data.users[sender];
  if (!user) {
    user = global.db.data.users[sender] = {
      coins: 1000,
      level: 1,
      xp: 0
    };
  }
  
  const arabicNormalize = (text) => {
    if (!text) return text;
    return text.replace(/[ุฃุฅุข]/g, 'ุง').replace(/ุฉ/g, 'ู');
  };
  const cmd = arabicNormalize(command.toLowerCase().trim());
  console.log(`[Menu Plugin] ุชูููุฐ ุงููุงุฆูุฉ ููุฃูุฑ: ${cmd}`);
  
  // ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ (ุฏุนู ุฌููุน ุงูุตูุบ ุงูููููุฉ)
  if (/^(ูุงุฆูู|menu|ุงูุงูุงูุฑ|ุงูุงูุฑ|ุงููุงุฆูู|ุงูุงูุงูุฑ|ุงููุงุฆูุฉ)$/.test(cmd)) {
    console.log('[Menu Plugin] ุฌุงุฑู ุฅุฑุณุงู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ...');
    const mainMenu = `โญโโโโโโโโโโโโโโโโโโโโโโฎ
โ  โ๏ธ *MUSACHI-BOT* โ๏ธ
โ  ููุณุงุดู - ุงูุจูุช ุงูุฃุณุทูุฑู
โฐโโโโโโโโโโโโโโโโโโโโโโฏ

๐ค *ุงููุณุชุฎุฏู:* @${sender.split('@')[0]}
๐ฐ *ุงูุนููุงุช:* ${user.coins || 0}
โญ *ุงููุณุชูู:* ${user.level || 1}

โโโโโโโโโโโโโโโโโโโโโ
๐ *ุงุฎุชุฑ ูุณู ุงูุฃูุงูุฑ:*

1๏ธโฃ ๐ *ุงููุงูู*
   โณ \`.ูุงุฆูุฉ-ูุงูู\` ๐น

2๏ธโฃ ๐ฐ *ุงูุงูุชุตุงุฏ*
   โณ \`.ูุงุฆูุฉ-ุงูุชุตุงุฏ\` ๐ผ

3๏ธโฃ ๐ฎ *ุงูุฃูุนุงุจ ุงูุฃุณุงุณูุฉ*
   โณ \`.ูุงุฆูุฉ-ุงูุนุงุจ\` ๐น

4๏ธโฃ ๐ฐ *ุงูููุงูู (ุฌุฏูุฏ)*
   โณ \`.ูุงุฆูุฉ-ููุงูู\` ๐ผ

5๏ธโฃ ๐ญ *ุงูุฃููู*
   โณ \`.ูุงุฆูุฉ-ุงููู\` ๐ผ

โโโโโโโโโโโโโโโโโโโโโ
โก *ุฃูุงูุฑ ุณุฑูุนุฉ:*
\`.ูููู\` | \`.ุฌุงุชุดุง\` | \`.ุนููุงุชู\`
\`.ุฒุนูู\` | \`.ุชุญุฏู\` | \`.ุจุทุงูุงุช\`

๐ธ ููุณุงุดู ุงูุจูุช | 2.0.0
๐ ุงููุทูุฑ: Musachi`;

    try {
      await conn.sendMessage(m.chat, {
        image: { url: 'https://i.ibb.co/YqT9LrW/1734788684449.jpg' },
        caption: mainMenu,
        mentions: [sender]
      }, { quoted: m });
      
      // ุฅุถุงูุฉ ุฑูุงูุดู
      await conn.sendMessage(m.chat, {
        react: { text: '๐น', key: m.key }
      });
    } catch (e) {
      console.error(`[Menu Plugin] ุฎุทุฃ ูู ุฅุฑุณุงู ุงููุงุฆูุฉ: ${e.message}`);
      await conn.sendMessage(m.chat, { text: mainMenu, mentions: [sender] }, { quoted: m });
    }
  }
  
  // ูุงุฆูุฉ ุงููุงูู
  else if (cmd === 'ูุงุฆูุฉ-ูุงูู') {
    const ownerMenu = `โญโโโโโโโโโโโโโโโโโโโโโโฎ
โ  ๐ *ูุงุฆูุฉ ุงููุงูู* ๐
โฐโโโโโโโโโโโโโโโโโโโโโโฏ

๐ *ุฅุฏุงุฑุฉ ุงููุงูููู:*

๐น \`.addowner @user\`
   โณ ุฅุถุงูุฉ ูุงูู ุฌุฏูุฏ

๐ผ \`.delowner @user\`
   โณ ุฅุฒุงูุฉ ูุงูู

๐น \`.listowner\`
   โณ ุนุฑุถ ูุงุฆูุฉ ุงููุงูููู

โโโโโโโโโโโโโโโโโโโโโ
๐ก *ููุงุญุธุฉ:*
โข ุงููุงูู ุงูุฃุณุงุณู ูุง ูููู ุญุฐูู
โข ุงููุงูููู ุงูุฌุฏุฏ ูุญุตููู ุนูู ุตูุงุญูุงุช ูุงููุฉ

๐ ููุณุงุดู - ููุฉ ูุณูุทุฑุฉ`;

    await conn.sendMessage(sender, { text: ownerMenu }, { quoted: m });
    await conn.sendMessage(sender, {
      react: { text: '๐', key: m.key }
    });
  }
  
  // ูุงุฆูุฉ ุงูุงูุชุตุงุฏ
  else if (cmd === 'ูุงุฆูุฉ-ุงูุชุตุงุฏ') {
    const economyMenu = `โญโโโโโโโโโโโโโโโโโโโโโโฎ
โ  ๐ฐ *ูุธุงู ุงูุงูุชุตุงุฏ* ๐ฐ
โฐโโโโโโโโโโโโโโโโโโโโโโฏ

๐ *ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ:*

๐น \`.ูููู\`
   โณ ุงูููุงูุฃุฉ ุงูููููุฉ (100+ ุนููุฉ)

๐ผ \`.ุนููุงุชู\`
   โณ ุนุฑุถ ุฑุตูุฏู

๐น \`.ุจุฑููุงูู\`
   โณ ุญุณุงุจู ุงูุดุฎุตู ุงููุงูู

๐ผ \`.rpg\`
   โณ ูุธุงู RPG ูุงูุฎุจุฑุฉ

๐น \`.rpg ุฑูู\`
   โณ ุฑูุน ูุณุชูุงู

โโโโโโโโโโโโโโโโโโโโโ
๐ *ุฑุตูุฏู ุงูุญุงูู:*
๐ฐ ${user.coins || 0} ุนููุฉ
โญ ุงููุณุชูู ${user.level || 1}

๐ ุงุฌูุน ูุงุฑุจุญ!`;

    await conn.sendMessage(sender, { text: economyMenu }, { quoted: m });
    await conn.sendMessage(sender, {
      react: { text: '๐ฐ', key: m.key }
    });
  }

  // ูุงุฆูุฉ ุงูุฃูุนุงุจ ุงูุฃุณุงุณูุฉ
  else if (cmd === 'ูุงุฆูุฉ-ุงูุนุงุจ') {
    const gamesMenu = `โญโโโโโโโโโโโโโโโโโโโโโโฎ
โ  ๐ฎ *ุงูุฃูุนุงุจ ุงูุฃุณุงุณูุฉ* ๐ฎ
โฐโโโโโโโโโโโโโโโโโโโโโโฏ

๐ฐ *ุงูุฌุงุชุดุง ูุงูุดุฎุตูุงุช:*

๐น \`.ุฌุงุชุดุง\`
   โณ ุณุญุจ ุดุฎุตูุฉ (100 ุนููุฉ)

๐ผ \`.ุดุฎุตูุงุชู\`
   โณ ุนุฑุถ ูุฌููุนุชู

๐น \`.ุจุทุงูุงุช ุณุญุจ\`
   โณ ุณุญุจ ุจุทุงูุฉ ุฃููู (50 ุนููุฉ)

๐ผ \`.ุจุทุงูุงุช ูุฌููุนุชู\`
   โณ ุนุฑุถ ุจุทุงูุงุชู

๐น \`.ุจุทุงูุงุช ุจูุน (ุฑูู)\`
   โณ ุจูุน ุจุทุงูุฉ

โโโโโโโโโโโโโโโโโโโโโ
โ๏ธ *ุงููุนุงุฑู ูุงูุชุญุฏูุงุช:*

๐ผ \`.ุฒุนูู\`
   โณ ุฒุนูู ุงูููู

๐น \`.ุฒุนูู ูุชุงู\`
   โณ ูุงุชู ุงูุฒุนูู

๐ผ \`.ุชุญุฏู\`
   โณ ุชุญุฏู ุงูููู

๐น \`.ุชุญุฏู ูุทุงูุจุฉ\`
   โณ ุงุญุตู ุนูู ุงูููุงูุฃุฉ

๐ ุงูุนุจ ูุงุฑุจุญ!`;

    await conn.sendMessage(sender, { text: gamesMenu }, { quoted: m });
    await conn.sendMessage(sender, {
      react: { text: '๐ฎ', key: m.key }
    });
  }
  
  // ูุงุฆูุฉ ุงูุฃููู
  else if (cmd === 'ูุงุฆูุฉ-ุงููู') {
    const animeMenu = `โญโโโโโโโโโโโโโโโโโโโโโโฎ
โ  ๐ญ *ุนุงูู ุงูุฃููู* ๐ญ
โฐโโโโโโโโโโโโโโโโโโโโโโฏ

๐ฌ *ูู ุดูุก ุนู ุงูุฃููู:*

๐น \`.ุงููู ูุนูููุฉ\`
   โณ ูุนูููุฉ ุฃููู ุนุดูุงุฆูุฉ

๐ผ \`.ุงููู ุงูุชุจุงุณ\`
   โณ ุงูุชุจุงุณ ูุดููุฑ

๐น \`.ุงููู ุชุฑุชูุจ\`
   โณ ุฃูุถู 10 ุฃูููุงุช

๐ผ \`.ุงููู ุชูุตูุฉ\`
   โณ ุชูุตูุฉ ุฃููู ููุงุณุจุฉ

๐น \`.ุงููู ุจุญุซ (ุงุณู)\`
   โณ ุจุญุซ ุชูุตููู ูุน ุตูุฑ

โโโโโโโโโโโโโโโโโโโโโ
๐ก *ูุซุงู:*
\`.ุงููู ุจุญุซ one piece\`

๐ ุนุงูู ุงูุฃููู!`;

    await conn.sendMessage(sender, { text: animeMenu }, { quoted: m });
    await conn.sendMessage(sender, {
      react: { text: '๐ญ', key: m.key }
    });
  }
}

handler.help = ['ูุงุฆูุฉ', 'menu'];
handler.tags = ['main'];
handler.command = /^(ูุงุฆูุฉ|menu|ุงูุงูุงูุฑ|ุฃูุงูุฑ|ุงูุงูุฑ|ูุงุฆูุฉ-ูุงูู|ูุงุฆูุฉ-ุงูุชุตุงุฏ|ูุงุฆูุฉ-ุงูุนุงุจ|ูุงุฆูุฉ-ููุงูู|ูุงุฆูุฉ-ุณุฑูุนุฉ|ูุงุฆูุฉ-ุชูุงูุณ|ูุงุฆูุฉ-ุฐูุงุก|ูุงุฆูุฉ-ูุฑูุจ|ูุงุฆูุฉ-ูุฒูุฏ|ูุงุฆูุฉ-ุงููู|ูุงุฆูุฉ-ุชุฑููู)$/i;

module.exports = handler;
