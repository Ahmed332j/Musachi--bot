// fun-games.js - Ø£Ù„Ø¹Ø§Ø¨ ØªØ±ÙÙŠÙ‡ÙŠØ© Ù…Ù…ØªØ¹Ø©
const fetch = require('node-fetch');

let handler = async (m, { conn, args, usedPrefix, text }) => {
  const action = args[0];
  
  try {
    // Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯
    if (action === 'Ù†Ø±Ø¯' || action === 'dice') {
      const roll = Math.floor(Math.random() * 6) + 1;
      const diceEmoji = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'][roll - 1];
      
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ğŸ² *Ø±Ù…ÙŠØ© Ø§Ù„Ù†Ø±Ø¯* ğŸ²
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      ${diceEmoji}
      
      Ø§Ù„Ù†ØªÙŠØ¬Ø©: **${roll}**
      
      ${roll === 6 ? 'ğŸ‰ Ø±Ù…ÙŠØ© Ù…Ù…ØªØ§Ø²Ø©!' : roll >= 4 ? 'ğŸ‘ Ø±Ù…ÙŠØ© Ø¬ÙŠØ¯Ø©!' : 'ğŸ˜… Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!'}`);
    }
    
    // Ù„Ø¹Ø¨Ø© Ø¹Ù…Ù„Ø©
    else if (action === 'Ø¹Ù…Ù„Ø©' || action === 'coin') {
      const result = Math.random() < 0.5 ? 'ØµÙˆØ±Ø©' : 'ÙƒØªØ§Ø¨Ø©';
      const emoji = result === 'ØµÙˆØ±Ø©' ? 'ğŸª™' : 'ğŸ’µ';
      
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ${emoji} *Ø±Ù…ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø©* ${emoji}
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      Ø§Ù„Ù†ØªÙŠØ¬Ø©: **${result}**`);
    }
    
    // Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø­Ø¨
    else if (action === 'Ø­Ø¨' || action === 'love') {
      const users = args.slice(1);
      
      if (users.length < 2) {
        return m.reply(`âŒ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµØ­ÙŠØ­:
        \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø­Ø¨ (Ø§Ø³Ù…1) (Ø§Ø³Ù…2)\`
        
        Ù…Ø«Ø§Ù„: \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø­Ø¨ Ø£Ø­Ù…Ø¯ ÙØ§Ø·Ù…Ø©\``);
      }
      
      const name1 = users[0];
      const name2 = users[1];
      const rate = Math.floor(Math.random() * 101);
      
      let status;
      if (rate >= 80) status = 'â¤ï¸â€ğŸ”¥ Ø­Ø¨ Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹!';
      else if (rate >= 60) status = 'ğŸ’• ØªÙˆØ§ÙÙ‚ Ù…Ù…ØªØ§Ø²!';
      else if (rate >= 40) status = 'ğŸ’— ØªÙˆØ§ÙÙ‚ Ø¬ÙŠØ¯';
      else if (rate >= 20) status = 'ğŸ’” ØªÙˆØ§ÙÙ‚ Ø¶Ø¹ÙŠÙ';
      else status = 'ğŸ˜¢ Ù„Ø§ ØªÙˆØ§ÙÙ‚';
      
      const hearts = 'â¤ï¸'.repeat(Math.floor(rate / 20));
      
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ğŸ’• *Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø­Ø¨* ğŸ’•
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      ğŸ‘¤ ${name1}
         â™¥ï¸
      ğŸ‘¤ ${name2}
      
      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
      ${hearts}
      Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¨: **${rate}%**
      
      ${status}`);
    }
    
    // Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†
    else if (action === 'ØªØ®Ù…ÙŠÙ†' || action === 'guess') {
      const number = Math.floor(Math.random() * 100) + 1;
      const guess = parseInt(args[1]);
      
      if (!guess || isNaN(guess)) {
        return m.reply(`ğŸ¯ *Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ®Ù…ÙŠÙ†*
        
        Ø®Ù…Ù† Ø±Ù‚Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 100!
        Ø§Ø³ØªØ®Ø¯Ù…: \`${usedPrefix}ØªØ±ÙÙŠÙ‡ ØªØ®Ù…ÙŠÙ† (Ø±Ù‚Ù…)\`
        
        Ù…Ø«Ø§Ù„: \`${usedPrefix}ØªØ±ÙÙŠÙ‡ ØªØ®Ù…ÙŠÙ† 50\``);
      }
      
      let result;
      if (guess === number) {
        result = `ğŸ‰ *ØµØ­ÙŠØ­! Ø£Ø­Ø³Ù†Øª!*\nØ§Ù„Ø±Ù‚Ù… ÙƒØ§Ù†: ${number}`;
      } else if (Math.abs(guess - number) <= 5) {
        result = `ğŸ”¥ *Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ø§Ù‹!*\nØ§Ù„Ø±Ù‚Ù… Ø§Ù„ØµØ­ÙŠØ­: ${number}`;
      } else if (Math.abs(guess - number) <= 15) {
        result = `ğŸ‘ *Ù‚Ø±ÙŠØ¨!*\nØ§Ù„Ø±Ù‚Ù… Ø§Ù„ØµØ­ÙŠØ­: ${number}`;
      } else {
        result = `âŒ *Ø¨Ø¹ÙŠØ¯!*\nØ§Ù„Ø±Ù‚Ù… Ø§Ù„ØµØ­ÙŠØ­: ${number}`;
      }
      
      m.reply(result);
    }
    
    // ØµÙˆØ±Ø© Ù‚Ø·Ø©
    else if (action === 'Ù‚Ø·' || action === 'Ù‚Ø·Ø©' || action === 'cat') {
      m.reply('ğŸ± Ø¬Ø§Ø±ÙŠ Ø¥Ø­Ø¶Ø§Ø± ØµÙˆØ±Ø© Ù‚Ø·Ø©...');
      const res = await fetch('https://api.thecatapi.com/v1/images/search');
      const data = await res.json();
      
      await conn.sendMessage(m.chat, {
        image: { url: data[0].url },
        caption: 'ğŸ± *Ù‚Ø·Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©!*'
      });
    }
    
    // ØµÙˆØ±Ø© ÙƒÙ„Ø¨
    else if (action === 'ÙƒÙ„Ø¨' || action === 'dog') {
      m.reply('ğŸ¶ Ø¬Ø§Ø±ÙŠ Ø¥Ø­Ø¶Ø§Ø± ØµÙˆØ±Ø© ÙƒÙ„Ø¨...');
      const res = await fetch('https://dog.ceo/api/breeds/image/random');
      const data = await res.json();
      
      await conn.sendMessage(m.chat, {
        image: { url: data.message },
        caption: 'ğŸ¶ *ÙƒÙ„Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ!*'
      });
    }
    
    // Ø­Ù‚ÙŠÙ‚Ø© Ø£Ù… Ø¬Ø±Ø£Ø©
    else if (action === 'Ø­Ù‚ÙŠÙ‚Ø©' || action === 'truth') {
      const truths = [
        "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªÙ†Ø¯Ù… Ø¹Ù„ÙŠÙ‡ØŸ",
        "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ ØªØ­Ø¨Ù‡ Ø³Ø±Ø§Ù‹ØŸ",
        "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± ÙƒØ°Ø¨Ø© Ù‚Ù„ØªÙ‡Ø§ØŸ",
        "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ®Ø¬Ù„ Ù…Ù†Ù‡ØŸ",
        "Ù…Ù† Ù‡Ùˆ Ø¢Ø®Ø± Ø´Ø®Øµ Ø±Ø§Ø³Ù„ØªÙ‡ØŸ",
        "Ù…Ø§ Ù‡Ùˆ Ø­Ù„Ù…Ùƒ Ø§Ù„Ø³Ø±ÙŠØŸ",
        "Ù‡Ù„ ÙƒØ°Ø¨Øª Ø¹Ù„Ù‰ Ø£Ù‡Ù„Ùƒ Ù…Ù† Ù‚Ø¨Ù„ØŸ",
        "Ù…Ø§ Ù‡Ùˆ Ø£Ø³ÙˆØ£ Ø´ÙŠØ¡ ÙØ¹Ù„ØªÙ‡ØŸ"
      ];
      
      const truth = truths[Math.floor(Math.random() * truths.length)];
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ğŸ¤” *Ø­Ù‚ÙŠÙ‚Ø©* ğŸ¤”
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      ${truth}`);
    }
    
    else if (action === 'Ø¬Ø±Ø£Ø©' || action === 'dare') {
      const dares = [
        "Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ø¢Ø®Ø± Ø´Ø®Øµ Ø±Ø§Ø³Ù„Ùƒ",
        "ØºÙŠØ± Ø§Ø³Ù…Ùƒ ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø³Ø§Ø¹Ø©",
        "Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ØµÙˆØªÙŠØ© Ø¨ØµÙˆØª Ù…Ø¶Ø­Ùƒ",
        "Ø§ÙƒØªØ¨ Ù…Ù†Ø´Ù† Ù„Ù€ 5 Ø£Ø´Ø®Ø§Øµ",
        "Ù‚Ù„ Ø´ÙŠØ¡ Ø¬Ù…ÙŠÙ„ Ø¹Ù† Ø§Ù„Ø´Ø®Øµ ÙÙˆÙ‚Ùƒ",
        "Ø£Ø±Ø³Ù„ Ø³ØªÙŠÙƒØ± Ù…Ø¶Ø­Ùƒ",
        "ØºÙŠØ± ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©",
        "Ù‚Ù„ Ù†ÙƒØªØ© Ù„Ù„Ø¬Ù…ÙŠØ¹"
      ];
      
      const dare = dares[Math.floor(Math.random() * dares.length)];
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ğŸ˜ *Ø¬Ø±Ø£Ø©* ğŸ˜
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      ${dare}`);
    }
    
    // Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    else {
      m.reply(`â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•®
      â”ƒ  ğŸª *Ø£Ù„Ø¹Ø§Ø¨ ØªØ±ÙÙŠÙ‡ÙŠØ©* ğŸª
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¯
      
      ğŸ² *Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:*
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ù†Ø±Ø¯\` - Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø¹Ù…Ù„Ø©\` - Ø±Ù…ÙŠ Ø¹Ù…Ù„Ø©
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ ØªØ®Ù…ÙŠÙ† (Ø±Ù‚Ù…)\` - Ø®Ù…Ù† Ø§Ù„Ø±Ù‚Ù…
      
      ğŸ’• *Ø§Ù„ØªØ±ÙÙŠÙ‡:*
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø­Ø¨ (Ø§Ø³Ù…1) (Ø§Ø³Ù…2)\` - Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø­Ø¨
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø­Ù‚ÙŠÙ‚Ø©\` - Ø³Ø¤Ø§Ù„ Ø­Ù‚ÙŠÙ‚Ø©
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø¬Ø±Ø£Ø©\` - ØªØ­Ø¯ÙŠ Ø¬Ø±Ø£Ø©
      
      ğŸ¾ *Ø§Ù„ØµÙˆØ±:*
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ù‚Ø·\` - ØµÙˆØ±Ø© Ù‚Ø·Ø©
      \`${usedPrefix}ØªØ±ÙÙŠÙ‡ ÙƒÙ„Ø¨\` - ØµÙˆØ±Ø© ÙƒÙ„Ø¨
      
      ğŸ’¡ *Ø£Ù…Ø«Ù„Ø©:*
      â€¢ \`${usedPrefix}ØªØ±ÙÙŠÙ‡ Ø­Ø¨ Ø£Ø­Ù…Ø¯ Ø³Ø§Ø±Ø©\`
      â€¢ \`${usedPrefix}ØªØ±ÙÙŠÙ‡ ØªØ®Ù…ÙŠÙ† 75\``);
    }
    
  } catch (err) {
    console.error(err);
    m.reply('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø±.');
  }
}

handler.help = ['ØªØ±ÙÙŠÙ‡', 'fun'];
handler.tags = ['fun'];
handler.command = /^(ØªØ±ÙÙŠÙ‡|fun|Ø§Ù„Ø¹Ø§Ø¨)$/i;

module.exports = handler;